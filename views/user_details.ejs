<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title><%= user.email %>'s Tools - Tool Sharing</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
  <link href="/css/styles.css" rel="stylesheet">
</head>

<body class="container mt-5">
  <%- include('partials/header') %>
  <h1><%= user.email %>'s Tools</h1>
  <a href="/search/users" class="btn btn-secondary mb-3">Back to User Search</a>
  <h2>Tools</h2>
  <ul class="list-group">
    <% tools.forEach(tool => { %>
    <li class="list-group-item d-flex align-items-start">
      <% if (tool.image_path) { %>
      <img src="/<%= tool.image_path %>" class="img-thumbnail me-3" style="width: 100px; height: 100px; object-fit: cover;" alt="Tool Thumbnail">
      <% } else { %>
      <div class="placeholder me-3" style="width: 100px; height: 100px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #6c757d;">No Image</div>
      <% } %>
      <div class="flex-grow-1">
        <a href="/tool/<%= tool.id %>"><%= tool.title %></a>
        <p><%= tool.description ? tool.description.substring(0, 100) + '...' : 'No description' %></p>
      </div>
      <% if (currentUser && currentUser.id === tool.user_id) { %>
      <button class="btn btn-danger btn-sm ms-2" onclick="deleteTool(<%= tool.id %>)">Delete</button>
      <% } %>
    </li>
    <% }); %>
  </ul>
  <script src="/js/main.js"></script>
</body>

</html>